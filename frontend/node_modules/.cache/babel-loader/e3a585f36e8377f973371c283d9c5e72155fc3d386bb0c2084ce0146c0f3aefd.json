{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\mathe\\\\Desktop\\\\Projeto_Sigef\\\\frontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport Upload from \"./components/Upload\";\nimport IntervalRow from \"./components/IntervalRow\";\nimport Search from \"./components/Search\";\nimport API from \"./api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function App() {\n  _s();\n  var _ref, _stats$total_certific;\n  const prefixes = [\"D5Y-M\", \"D5Y-P\", \"D5Y-V\"];\n  const [stats, setStats] = useState(null);\n  const [intervals, setIntervals] = useState({});\n  const [loadingStats, setLoadingStats] = useState(true);\n  const [loadingIntervals, setLoadingIntervals] = useState(true);\n  const fetchStats = useCallback(async () => {\n    setLoadingStats(true);\n    try {\n      const r = await API.get(\"/stats\");\n      setStats(r.data);\n    } catch (e) {\n      console.error(\"Erro ao buscar stats:\", e);\n      setStats(null);\n    } finally {\n      setLoadingStats(false);\n    }\n  }, []);\n  const fetchIntervals = useCallback(async () => {\n    setLoadingIntervals(true);\n    const res = {};\n    for (const p of prefixes) {\n      try {\n        const r = await API.get(`/intervals/${p}`);\n        res[p] = r.data;\n      } catch (e) {\n        console.warn(`Erro carregando intervalo ${p}`, e);\n        res[p] = null;\n      }\n    }\n    setIntervals(res);\n    setLoadingIntervals(false);\n  }, []);\n  useEffect(() => {\n    fetchStats();\n    fetchIntervals();\n  }, [fetchStats, fetchIntervals]);\n  const handleUploaded = async () => {\n    await Promise.all([fetchStats(), fetchIntervals()]);\n  };\n  const totalCertificates = (_ref = (_stats$total_certific = stats === null || stats === void 0 ? void 0 : stats.total_certificados) !== null && _stats$total_certific !== void 0 ? _stats$total_certific : stats === null || stats === void 0 ? void 0 : stats.certificates_count) !== null && _ref !== void 0 ? _ref : 0;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: 20,\n      fontFamily: \"Arial, sans-serif\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"SIGEF Manager\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Upload, {\n      onUploaded: handleUploaded\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 8,\n        marginBottom: 16\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"N\\xFAmero de certificados: \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), loadingStats ? \"carregando...\" : totalCertificates]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 20,\n        display: \"grid\",\n        gap: 16\n      },\n      children: prefixes.map(p => {\n        var _intervals$p, _intervals$p2, _intervals$p3;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: loadingIntervals ? /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [p, \": carregando...\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 15\n          }, this) : intervals[p] ? /*#__PURE__*/_jsxDEV(IntervalRow, {\n            prefix: p,\n            missingIntervals: ((_intervals$p = intervals[p]) === null || _intervals$p === void 0 ? void 0 : _intervals$p.missing_intervals) || [],\n            currentInterval: ((_intervals$p2 = intervals[p]) === null || _intervals$p2 === void 0 ? void 0 : _intervals$p2.current_interval) || {},\n            nextInterval: ((_intervals$p3 = intervals[p]) === null || _intervals$p3 === void 0 ? void 0 : _intervals$p3.next_interval) || {}\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [p, \": erro ao carregar\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 15\n          }, this)\n        }, p, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 32\n      },\n      children: /*#__PURE__*/_jsxDEV(Search, {\n        onPoint: data => {\n          console.log(\"Resultado ponto:\", data);\n        },\n        onCertification: data => {\n          console.log(\"Resultado certificação:\", data);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"rGwWlK7482zD9Ca41Si1hRqg/w4=\");\n_c = App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","Upload","IntervalRow","Search","API","jsxDEV","_jsxDEV","App","_s","_ref","_stats$total_certific","prefixes","stats","setStats","intervals","setIntervals","loadingStats","setLoadingStats","loadingIntervals","setLoadingIntervals","fetchStats","r","get","data","e","console","error","fetchIntervals","res","p","warn","handleUploaded","Promise","all","totalCertificates","total_certificados","certificates_count","style","padding","fontFamily","children","fileName","_jsxFileName","lineNumber","columnNumber","onUploaded","marginTop","marginBottom","display","gap","map","_intervals$p","_intervals$p2","_intervals$p3","prefix","missingIntervals","missing_intervals","currentInterval","current_interval","nextInterval","next_interval","onPoint","log","onCertification","_c","$RefreshReg$"],"sources":["C:/Users/mathe/Desktop/Projeto_Sigef/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\r\nimport Upload from \"./components/Upload\";\r\nimport IntervalRow from \"./components/IntervalRow\";\r\nimport Search from \"./components/Search\";\r\nimport API from \"./api\";\r\n\r\nexport default function App() {\r\n  const prefixes = [\"D5Y-M\", \"D5Y-P\", \"D5Y-V\"];\r\n  const [stats, setStats] = useState(null);\r\n  const [intervals, setIntervals] = useState({});\r\n  const [loadingStats, setLoadingStats] = useState(true);\r\n  const [loadingIntervals, setLoadingIntervals] = useState(true);\r\n\r\n  const fetchStats = useCallback(async () => {\r\n    setLoadingStats(true);\r\n    try {\r\n      const r = await API.get(\"/stats\");\r\n      setStats(r.data);\r\n    } catch (e) {\r\n      console.error(\"Erro ao buscar stats:\", e);\r\n      setStats(null);\r\n    } finally {\r\n      setLoadingStats(false);\r\n    }\r\n  }, []);\r\n\r\n  const fetchIntervals = useCallback(async () => {\r\n    setLoadingIntervals(true);\r\n    const res = {};\r\n    for (const p of prefixes) {\r\n      try {\r\n        const r = await API.get(`/intervals/${p}`);\r\n        res[p] = r.data;\r\n      } catch (e) {\r\n        console.warn(`Erro carregando intervalo ${p}`, e);\r\n        res[p] = null;\r\n      }\r\n    }\r\n    setIntervals(res);\r\n    setLoadingIntervals(false);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    fetchStats();\r\n    fetchIntervals();\r\n  }, [fetchStats, fetchIntervals]);\r\n\r\n  const handleUploaded = async () => {\r\n    await Promise.all([fetchStats(), fetchIntervals()]);\r\n  };\r\n\r\n  const totalCertificates =\r\n    stats?.total_certificados ?? stats?.certificates_count ?? 0;\r\n\r\n  return (\r\n    <div style={{ padding: 20, fontFamily: \"Arial, sans-serif\" }}>\r\n      <h1>SIGEF Manager</h1>\r\n\r\n      <Upload onUploaded={handleUploaded} />\r\n\r\n      <div style={{ marginTop: 8, marginBottom: 16 }}>\r\n        <strong>Número de certificados: </strong>\r\n        {loadingStats ? \"carregando...\" : totalCertificates}\r\n      </div>\r\n\r\n      <div style={{ marginTop: 20, display: \"grid\", gap: 16 }}>\r\n        {prefixes.map((p) => (\r\n          <div key={p}>\r\n            {loadingIntervals ? (\r\n              <div>{p}: carregando...</div>\r\n            ) : intervals[p] ? (\r\n              <IntervalRow\r\n                prefix={p}\r\n                missingIntervals={intervals[p]?.missing_intervals || []}\r\n                currentInterval={intervals[p]?.current_interval || {}}\r\n                nextInterval={intervals[p]?.next_interval || {}}\r\n              />\r\n            ) : (\r\n              <div>{p}: erro ao carregar</div>\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      <div style={{ marginTop: 32 }}>\r\n        <Search\r\n          onPoint={(data) => {\r\n            console.log(\"Resultado ponto:\", data);\r\n          }}\r\n          onCertification={(data) => {\r\n            console.log(\"Resultado certificação:\", data);\r\n          }}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,WAAW,QAAQ,OAAO;AAC/D,OAAOC,MAAM,MAAM,qBAAqB;AACxC,OAAOC,WAAW,MAAM,0BAA0B;AAClD,OAAOC,MAAM,MAAM,qBAAqB;AACxC,OAAOC,GAAG,MAAM,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAExB,eAAe,SAASC,GAAGA,CAAA,EAAG;EAAAC,EAAA;EAAA,IAAAC,IAAA,EAAAC,qBAAA;EAC5B,MAAMC,QAAQ,GAAG,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,CAAC;EAC5C,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGf,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM,CAACgB,SAAS,EAAEC,YAAY,CAAC,GAAGjB,QAAQ,CAAC,CAAC,CAAC,CAAC;EAC9C,MAAM,CAACkB,YAAY,EAAEC,eAAe,CAAC,GAAGnB,QAAQ,CAAC,IAAI,CAAC;EACtD,MAAM,CAACoB,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGrB,QAAQ,CAAC,IAAI,CAAC;EAE9D,MAAMsB,UAAU,GAAGpB,WAAW,CAAC,YAAY;IACzCiB,eAAe,CAAC,IAAI,CAAC;IACrB,IAAI;MACF,MAAMI,CAAC,GAAG,MAAMjB,GAAG,CAACkB,GAAG,CAAC,QAAQ,CAAC;MACjCT,QAAQ,CAACQ,CAAC,CAACE,IAAI,CAAC;IAClB,CAAC,CAAC,OAAOC,CAAC,EAAE;MACVC,OAAO,CAACC,KAAK,CAAC,uBAAuB,EAAEF,CAAC,CAAC;MACzCX,QAAQ,CAAC,IAAI,CAAC;IAChB,CAAC,SAAS;MACRI,eAAe,CAAC,KAAK,CAAC;IACxB;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMU,cAAc,GAAG3B,WAAW,CAAC,YAAY;IAC7CmB,mBAAmB,CAAC,IAAI,CAAC;IACzB,MAAMS,GAAG,GAAG,CAAC,CAAC;IACd,KAAK,MAAMC,CAAC,IAAIlB,QAAQ,EAAE;MACxB,IAAI;QACF,MAAMU,CAAC,GAAG,MAAMjB,GAAG,CAACkB,GAAG,CAAC,cAAcO,CAAC,EAAE,CAAC;QAC1CD,GAAG,CAACC,CAAC,CAAC,GAAGR,CAAC,CAACE,IAAI;MACjB,CAAC,CAAC,OAAOC,CAAC,EAAE;QACVC,OAAO,CAACK,IAAI,CAAC,6BAA6BD,CAAC,EAAE,EAAEL,CAAC,CAAC;QACjDI,GAAG,CAACC,CAAC,CAAC,GAAG,IAAI;MACf;IACF;IACAd,YAAY,CAACa,GAAG,CAAC;IACjBT,mBAAmB,CAAC,KAAK,CAAC;EAC5B,CAAC,EAAE,EAAE,CAAC;EAENpB,SAAS,CAAC,MAAM;IACdqB,UAAU,CAAC,CAAC;IACZO,cAAc,CAAC,CAAC;EAClB,CAAC,EAAE,CAACP,UAAU,EAAEO,cAAc,CAAC,CAAC;EAEhC,MAAMI,cAAc,GAAG,MAAAA,CAAA,KAAY;IACjC,MAAMC,OAAO,CAACC,GAAG,CAAC,CAACb,UAAU,CAAC,CAAC,EAAEO,cAAc,CAAC,CAAC,CAAC,CAAC;EACrD,CAAC;EAED,MAAMO,iBAAiB,IAAAzB,IAAA,IAAAC,qBAAA,GACrBE,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEuB,kBAAkB,cAAAzB,qBAAA,cAAAA,qBAAA,GAAIE,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEwB,kBAAkB,cAAA3B,IAAA,cAAAA,IAAA,GAAI,CAAC;EAE7D,oBACEH,OAAA;IAAK+B,KAAK,EAAE;MAAEC,OAAO,EAAE,EAAE;MAAEC,UAAU,EAAE;IAAoB,CAAE;IAAAC,QAAA,gBAC3DlC,OAAA;MAAAkC,QAAA,EAAI;IAAa;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eAEtBtC,OAAA,CAACL,MAAM;MAAC4C,UAAU,EAAEd;IAAe;MAAAU,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eAEtCtC,OAAA;MAAK+B,KAAK,EAAE;QAAES,SAAS,EAAE,CAAC;QAAEC,YAAY,EAAE;MAAG,CAAE;MAAAP,QAAA,gBAC7ClC,OAAA;QAAAkC,QAAA,EAAQ;MAAwB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,EACxC5B,YAAY,GAAG,eAAe,GAAGkB,iBAAiB;IAAA;MAAAO,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAChD,CAAC,eAENtC,OAAA;MAAK+B,KAAK,EAAE;QAAES,SAAS,EAAE,EAAE;QAAEE,OAAO,EAAE,MAAM;QAAEC,GAAG,EAAE;MAAG,CAAE;MAAAT,QAAA,EACrD7B,QAAQ,CAACuC,GAAG,CAAErB,CAAC;QAAA,IAAAsB,YAAA,EAAAC,aAAA,EAAAC,aAAA;QAAA,oBACd/C,OAAA;UAAAkC,QAAA,EACGtB,gBAAgB,gBACfZ,OAAA;YAAAkC,QAAA,GAAMX,CAAC,EAAC,iBAAe;UAAA;YAAAY,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,GAC3B9B,SAAS,CAACe,CAAC,CAAC,gBACdvB,OAAA,CAACJ,WAAW;YACVoD,MAAM,EAAEzB,CAAE;YACV0B,gBAAgB,EAAE,EAAAJ,YAAA,GAAArC,SAAS,CAACe,CAAC,CAAC,cAAAsB,YAAA,uBAAZA,YAAA,CAAcK,iBAAiB,KAAI,EAAG;YACxDC,eAAe,EAAE,EAAAL,aAAA,GAAAtC,SAAS,CAACe,CAAC,CAAC,cAAAuB,aAAA,uBAAZA,aAAA,CAAcM,gBAAgB,KAAI,CAAC,CAAE;YACtDC,YAAY,EAAE,EAAAN,aAAA,GAAAvC,SAAS,CAACe,CAAC,CAAC,cAAAwB,aAAA,uBAAZA,aAAA,CAAcO,aAAa,KAAI,CAAC;UAAE;YAAAnB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACjD,CAAC,gBAEFtC,OAAA;YAAAkC,QAAA,GAAMX,CAAC,EAAC,oBAAkB;UAAA;YAAAY,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK;QAChC,GAZOf,CAAC;UAAAY,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAaN,CAAC;MAAA,CACP;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CAAC,eAENtC,OAAA;MAAK+B,KAAK,EAAE;QAAES,SAAS,EAAE;MAAG,CAAE;MAAAN,QAAA,eAC5BlC,OAAA,CAACH,MAAM;QACL0D,OAAO,EAAGtC,IAAI,IAAK;UACjBE,OAAO,CAACqC,GAAG,CAAC,kBAAkB,EAAEvC,IAAI,CAAC;QACvC,CAAE;QACFwC,eAAe,EAAGxC,IAAI,IAAK;UACzBE,OAAO,CAACqC,GAAG,CAAC,yBAAyB,EAAEvC,IAAI,CAAC;QAC9C;MAAE;QAAAkB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV;AAACpC,EAAA,CA1FuBD,GAAG;AAAAyD,EAAA,GAAHzD,GAAG;AAAA,IAAAyD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}