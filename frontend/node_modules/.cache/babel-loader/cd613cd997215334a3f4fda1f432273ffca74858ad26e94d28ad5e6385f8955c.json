{"ast":null,"code":"// src/App.js\nimport React,{useState,useEffect,useCallback}from\"react\";import Upload from\"./components/Upload\";import IntervalRow from\"./components/IntervalRow\";import Search from\"./components/Search\";import PointInfo from\"./components/PointInfo\";import CertificateDetail from\"./components/CertificateDetail\";import API from\"./api\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function App(){var _ref,_stats$total_certific;const prefixes=[\"D5Y-M\",\"D5Y-P\",\"D5Y-V\"];const[stats,setStats]=useState(null);const[intervals,setIntervals]=useState({});const[pointResult,setPointResult]=useState(null);const[certResult,setCertResult]=useState(null);const fetchStats=useCallback(async()=>{try{const r=await API.get(\"/stats\");setStats(r.data);}catch{}},[]);const fetchIntervals=useCallback(async()=>{const res={};for(const p of prefixes){try{const r=await API.get(`/intervals/${p}`);res[p]=r.data;}catch{res[p]=null;}}setIntervals(res);},[]);useEffect(()=>{fetchStats();fetchIntervals();},[fetchStats,fetchIntervals]);const handleUploaded=async()=>{setPointResult(null);setCertResult(null);await Promise.all([fetchStats(),fetchIntervals()]);};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"header\",{children:/*#__PURE__*/_jsx(\"h1\",{children:\"SIGEF Manager\"})}),/*#__PURE__*/_jsx(Upload,{onUploaded:handleUploaded}),/*#__PURE__*/_jsxs(\"div\",{style:{margin:\"16px 0\"},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"N\\xFAmero de certificados:\"}),\" \",(_ref=(_stats$total_certific=stats===null||stats===void 0?void 0:stats.total_certificados)!==null&&_stats$total_certific!==void 0?_stats$total_certific:stats===null||stats===void 0?void 0:stats.certificates_count)!==null&&_ref!==void 0?_ref:0]}),/*#__PURE__*/_jsx(\"div\",{children:prefixes.map(p=>intervals[p]?/*#__PURE__*/_jsx(IntervalRow,{prefix:p,missingIntervals:intervals[p].missing_intervals,currentInterval:intervals[p].current_interval,nextInterval:intervals[p].next_interval},p):null)}),/*#__PURE__*/_jsx(Search,{onPoint:data=>{setPointResult(data);setCertResult(null);},onCertification:data=>{setCertResult(data);setPointResult(null);}}),pointResult&&/*#__PURE__*/_jsx(PointInfo,{data:pointResult}),certResult&&/*#__PURE__*/_jsx(CertificateDetail,{data:certResult})]});}","map":{"version":3,"names":["React","useState","useEffect","useCallback","Upload","IntervalRow","Search","PointInfo","CertificateDetail","API","jsx","_jsx","jsxs","_jsxs","App","_ref","_stats$total_certific","prefixes","stats","setStats","intervals","setIntervals","pointResult","setPointResult","certResult","setCertResult","fetchStats","r","get","data","fetchIntervals","res","p","handleUploaded","Promise","all","className","children","onUploaded","style","margin","total_certificados","certificates_count","map","prefix","missingIntervals","missing_intervals","currentInterval","current_interval","nextInterval","next_interval","onPoint","onCertification"],"sources":["C:/Users/mathe/Desktop/Projeto_Sigef/frontend/src/App.js"],"sourcesContent":["// src/App.js\r\nimport React, { useState, useEffect, useCallback } from \"react\";\r\nimport Upload from \"./components/Upload\";\r\nimport IntervalRow from \"./components/IntervalRow\";\r\nimport Search from \"./components/Search\";\r\nimport PointInfo from \"./components/PointInfo\";\r\nimport CertificateDetail from \"./components/CertificateDetail\";\r\nimport API from \"./api\";\r\n\r\nexport default function App() {\r\n  const prefixes = [\"D5Y-M\", \"D5Y-P\", \"D5Y-V\"];\r\n  const [stats, setStats] = useState(null);\r\n  const [intervals, setIntervals] = useState({});\r\n  const [pointResult, setPointResult] = useState(null);\r\n  const [certResult, setCertResult] = useState(null);\r\n\r\n  const fetchStats = useCallback(async () => {\r\n    try {\r\n      const r = await API.get(\"/stats\");\r\n      setStats(r.data);\r\n    } catch {}\r\n  }, []);\r\n\r\n  const fetchIntervals = useCallback(async () => {\r\n    const res = {};\r\n    for (const p of prefixes) {\r\n      try {\r\n        const r = await API.get(`/intervals/${p}`);\r\n        res[p] = r.data;\r\n      } catch {\r\n        res[p] = null;\r\n      }\r\n    }\r\n    setIntervals(res);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    fetchStats();\r\n    fetchIntervals();\r\n  }, [fetchStats, fetchIntervals]);\r\n\r\n  const handleUploaded = async () => {\r\n    setPointResult(null);\r\n    setCertResult(null);\r\n    await Promise.all([fetchStats(), fetchIntervals()]);\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <header>\r\n        <h1>SIGEF Manager</h1>\r\n      </header>\r\n\r\n      <Upload onUploaded={handleUploaded} />\r\n\r\n      <div style={{ margin: \"16px 0\" }}>\r\n        <strong>NÃºmero de certificados:</strong>{\" \"}\r\n        {stats?.total_certificados ?? stats?.certificates_count ?? 0}\r\n      </div>\r\n\r\n      <div>\r\n        {prefixes.map((p) =>\r\n          intervals[p] ? (\r\n            <IntervalRow\r\n              key={p}\r\n              prefix={p}\r\n              missingIntervals={intervals[p].missing_intervals}\r\n              currentInterval={intervals[p].current_interval}\r\n              nextInterval={intervals[p].next_interval}\r\n            />\r\n          ) : null\r\n        )}\r\n      </div>\r\n\r\n      <Search\r\n        onPoint={(data) => {\r\n          setPointResult(data);\r\n          setCertResult(null);\r\n        }}\r\n        onCertification={(data) => {\r\n          setCertResult(data);\r\n          setPointResult(null);\r\n        }}\r\n      />\r\n\r\n      {pointResult && <PointInfo data={pointResult} />}\r\n      {certResult && <CertificateDetail data={certResult} />}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,WAAW,KAAQ,OAAO,CAC/D,MAAO,CAAAC,MAAM,KAAM,qBAAqB,CACxC,MAAO,CAAAC,WAAW,KAAM,0BAA0B,CAClD,MAAO,CAAAC,MAAM,KAAM,qBAAqB,CACxC,MAAO,CAAAC,SAAS,KAAM,wBAAwB,CAC9C,MAAO,CAAAC,iBAAiB,KAAM,gCAAgC,CAC9D,MAAO,CAAAC,GAAG,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAExB,cAAe,SAAS,CAAAC,GAAGA,CAAA,CAAG,KAAAC,IAAA,CAAAC,qBAAA,CAC5B,KAAM,CAAAC,QAAQ,CAAG,CAAC,OAAO,CAAE,OAAO,CAAE,OAAO,CAAC,CAC5C,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGlB,QAAQ,CAAC,IAAI,CAAC,CACxC,KAAM,CAACmB,SAAS,CAAEC,YAAY,CAAC,CAAGpB,QAAQ,CAAC,CAAC,CAAC,CAAC,CAC9C,KAAM,CAACqB,WAAW,CAAEC,cAAc,CAAC,CAAGtB,QAAQ,CAAC,IAAI,CAAC,CACpD,KAAM,CAACuB,UAAU,CAAEC,aAAa,CAAC,CAAGxB,QAAQ,CAAC,IAAI,CAAC,CAElD,KAAM,CAAAyB,UAAU,CAAGvB,WAAW,CAAC,SAAY,CACzC,GAAI,CACF,KAAM,CAAAwB,CAAC,CAAG,KAAM,CAAAlB,GAAG,CAACmB,GAAG,CAAC,QAAQ,CAAC,CACjCT,QAAQ,CAACQ,CAAC,CAACE,IAAI,CAAC,CAClB,CAAE,KAAM,CAAC,CACX,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAC,cAAc,CAAG3B,WAAW,CAAC,SAAY,CAC7C,KAAM,CAAA4B,GAAG,CAAG,CAAC,CAAC,CACd,IAAK,KAAM,CAAAC,CAAC,GAAI,CAAAf,QAAQ,CAAE,CACxB,GAAI,CACF,KAAM,CAAAU,CAAC,CAAG,KAAM,CAAAlB,GAAG,CAACmB,GAAG,CAAC,cAAcI,CAAC,EAAE,CAAC,CAC1CD,GAAG,CAACC,CAAC,CAAC,CAAGL,CAAC,CAACE,IAAI,CACjB,CAAE,KAAM,CACNE,GAAG,CAACC,CAAC,CAAC,CAAG,IAAI,CACf,CACF,CACAX,YAAY,CAACU,GAAG,CAAC,CACnB,CAAC,CAAE,EAAE,CAAC,CAEN7B,SAAS,CAAC,IAAM,CACdwB,UAAU,CAAC,CAAC,CACZI,cAAc,CAAC,CAAC,CAClB,CAAC,CAAE,CAACJ,UAAU,CAAEI,cAAc,CAAC,CAAC,CAEhC,KAAM,CAAAG,cAAc,CAAG,KAAAA,CAAA,GAAY,CACjCV,cAAc,CAAC,IAAI,CAAC,CACpBE,aAAa,CAAC,IAAI,CAAC,CACnB,KAAM,CAAAS,OAAO,CAACC,GAAG,CAAC,CAACT,UAAU,CAAC,CAAC,CAAEI,cAAc,CAAC,CAAC,CAAC,CAAC,CACrD,CAAC,CAED,mBACEjB,KAAA,QAAKuB,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxB1B,IAAA,WAAA0B,QAAA,cACE1B,IAAA,OAAA0B,QAAA,CAAI,eAAa,CAAI,CAAC,CAChB,CAAC,cAET1B,IAAA,CAACP,MAAM,EAACkC,UAAU,CAAEL,cAAe,CAAE,CAAC,cAEtCpB,KAAA,QAAK0B,KAAK,CAAE,CAAEC,MAAM,CAAE,QAAS,CAAE,CAAAH,QAAA,eAC/B1B,IAAA,WAAA0B,QAAA,CAAQ,4BAAuB,CAAQ,CAAC,CAAC,GAAG,EAAAtB,IAAA,EAAAC,qBAAA,CAC3CE,KAAK,SAALA,KAAK,iBAALA,KAAK,CAAEuB,kBAAkB,UAAAzB,qBAAA,UAAAA,qBAAA,CAAIE,KAAK,SAALA,KAAK,iBAALA,KAAK,CAAEwB,kBAAkB,UAAA3B,IAAA,UAAAA,IAAA,CAAI,CAAC,EACzD,CAAC,cAENJ,IAAA,QAAA0B,QAAA,CACGpB,QAAQ,CAAC0B,GAAG,CAAEX,CAAC,EACdZ,SAAS,CAACY,CAAC,CAAC,cACVrB,IAAA,CAACN,WAAW,EAEVuC,MAAM,CAAEZ,CAAE,CACVa,gBAAgB,CAAEzB,SAAS,CAACY,CAAC,CAAC,CAACc,iBAAkB,CACjDC,eAAe,CAAE3B,SAAS,CAACY,CAAC,CAAC,CAACgB,gBAAiB,CAC/CC,YAAY,CAAE7B,SAAS,CAACY,CAAC,CAAC,CAACkB,aAAc,EAJpClB,CAKN,CAAC,CACA,IACN,CAAC,CACE,CAAC,cAENrB,IAAA,CAACL,MAAM,EACL6C,OAAO,CAAGtB,IAAI,EAAK,CACjBN,cAAc,CAACM,IAAI,CAAC,CACpBJ,aAAa,CAAC,IAAI,CAAC,CACrB,CAAE,CACF2B,eAAe,CAAGvB,IAAI,EAAK,CACzBJ,aAAa,CAACI,IAAI,CAAC,CACnBN,cAAc,CAAC,IAAI,CAAC,CACtB,CAAE,CACH,CAAC,CAEDD,WAAW,eAAIX,IAAA,CAACJ,SAAS,EAACsB,IAAI,CAAEP,WAAY,CAAE,CAAC,CAC/CE,UAAU,eAAIb,IAAA,CAACH,iBAAiB,EAACqB,IAAI,CAAEL,UAAW,CAAE,CAAC,EACnD,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}