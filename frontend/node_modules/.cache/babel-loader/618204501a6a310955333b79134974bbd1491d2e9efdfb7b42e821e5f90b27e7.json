{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\mathe\\\\Desktop\\\\Projeto_Sigef\\\\frontend\\\\src\\\\components\\\\Search.js\",\n  _s = $RefreshSig$();\n// src/components/Search.js\n\nimport React, { useState } from \"react\";\nimport API from \"../api\";\nimport CertificateInfo from \"./CertificateInfo\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Search({\n  onPoint,\n  onCertification\n}) {\n  _s();\n  const [pointCode, setPointCode] = useState(\"\");\n  const [certId, setCertId] = useState(\"\");\n  const [certDetail, setCertDetail] = useState(null);\n\n  // lista completa\n  const [showAll, setShowAll] = useState(false);\n  const [certList, setCertList] = useState([]);\n  const [loadingList, setLoadingList] = useState(false);\n  const handleSearchPoint = async () => {\n    try {\n      const res = await API.get(`/search/point/${pointCode}`);\n      onPoint(res.data);\n    } catch {\n      window.alert(\"Ponto não encontrado\");\n    }\n  };\n  const handleSearchCert = async () => {\n    try {\n      const res = await API.get(`/search/certification/${certId}`);\n      onCertification(res.data);\n      setCertDetail(res.data);\n      // fechar lista caso aberta\n      setShowAll(false);\n    } catch {\n      window.alert(\"Certificação não encontrada\");\n    }\n  };\n  const handleToggleList = async () => {\n    if (!showAll) {\n      setLoadingList(true);\n      try {\n        const res = await API.get(\"/certifications\");\n        setCertList(res.data);\n      } catch {\n        window.alert(\"Falha ao carregar lista de certificados\");\n      } finally {\n        setLoadingList(false);\n      }\n    }\n    setShowAll(v => !v);\n    setCertDetail(null);\n  };\n  const handleClickCert = async id => {\n    try {\n      const res = await API.get(`/search/certification/${id}`);\n      setCertDetail(res.data);\n      // dispara também callback, se quiser manter App sincronizado\n      onCertification(res.data);\n    } catch {\n      window.alert(\"Erro ao buscar certificação\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card\",\n    style: {\n      marginTop: \"2rem\",\n      padding: \"1rem\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Pesquisar\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\",\n        gap: \"0.5rem\",\n        marginBottom: \"1rem\",\n        flexWrap: \"wrap\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Buscar ponto (ex: D5Y-M-0001)\",\n        value: pointCode,\n        onChange: e => setPointCode(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSearchPoint,\n        children: \"Buscar ponto\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\",\n        gap: \"0.5rem\",\n        marginBottom: \"1rem\",\n        flexWrap: \"wrap\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Buscar certifica\\xE7\\xE3o (ID)\",\n        value: certId,\n        onChange: e => setCertId(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSearchCert,\n        children: \"Buscar certifica\\xE7\\xE3o\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleToggleList,\n        children: showAll ? \"Ocultar todas\" : \"Ver todas\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), showAll && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        maxHeight: 200,\n        overflowY: \"auto\",\n        border: \"1px solid var(--color-border)\",\n        borderRadius: \"4px\",\n        marginBottom: \"1rem\"\n      },\n      children: [loadingList ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: \"0.5rem\"\n        },\n        children: \"Carregando...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 15\n      }, this) : certList.map(c => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: \"0.5rem\",\n          borderBottom: \"1px solid var(--color-border)\",\n          cursor: \"pointer\"\n        },\n        onClick: () => handleClickCert(c.certification_id),\n        children: [c.certification_id, \" \\u2014 \", c.denominacao]\n      }, c.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 17\n      }, this)), !loadingList && certList.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: \"0.5rem\",\n          color: \"#6b7280\"\n        },\n        children: \"Nenhum certificado cadastrado.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }, this), certDetail && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: \"1rem\"\n      },\n      children: /*#__PURE__*/_jsxDEV(CertificateInfo, {\n        data: certDetail\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n}\n_s(Search, \"c7JW9ZbmOZTDuOSM244d4UY81ms=\");\n_c = Search;\nvar _c;\n$RefreshReg$(_c, \"Search\");","map":{"version":3,"names":["React","useState","API","CertificateInfo","jsxDEV","_jsxDEV","Search","onPoint","onCertification","_s","pointCode","setPointCode","certId","setCertId","certDetail","setCertDetail","showAll","setShowAll","certList","setCertList","loadingList","setLoadingList","handleSearchPoint","res","get","data","window","alert","handleSearchCert","handleToggleList","v","handleClickCert","id","className","style","marginTop","padding","children","fileName","_jsxFileName","lineNumber","columnNumber","display","gap","marginBottom","flexWrap","type","placeholder","value","onChange","e","target","onClick","maxHeight","overflowY","border","borderRadius","map","c","borderBottom","cursor","certification_id","denominacao","length","color","_c","$RefreshReg$"],"sources":["C:/Users/mathe/Desktop/Projeto_Sigef/frontend/src/components/Search.js"],"sourcesContent":["// src/components/Search.js\r\n\r\nimport React, { useState } from \"react\";\r\nimport API from \"../api\";\r\nimport CertificateInfo from \"./CertificateInfo\";\r\n\r\nexport default function Search({ onPoint, onCertification }) {\r\n  const [pointCode, setPointCode] = useState(\"\");\r\n  const [certId, setCertId] = useState(\"\");\r\n  const [certDetail, setCertDetail] = useState(null);\r\n\r\n  // lista completa\r\n  const [showAll, setShowAll] = useState(false);\r\n  const [certList, setCertList] = useState([]);\r\n  const [loadingList, setLoadingList] = useState(false);\r\n\r\n  const handleSearchPoint = async () => {\r\n    try {\r\n      const res = await API.get(`/search/point/${pointCode}`);\r\n      onPoint(res.data);\r\n    } catch {\r\n      window.alert(\"Ponto não encontrado\");\r\n    }\r\n  };\r\n\r\n  const handleSearchCert = async () => {\r\n    try {\r\n      const res = await API.get(`/search/certification/${certId}`);\r\n      onCertification(res.data);\r\n      setCertDetail(res.data);\r\n      // fechar lista caso aberta\r\n      setShowAll(false);\r\n    } catch {\r\n      window.alert(\"Certificação não encontrada\");\r\n    }\r\n  };\r\n\r\n  const handleToggleList = async () => {\r\n    if (!showAll) {\r\n      setLoadingList(true);\r\n      try {\r\n        const res = await API.get(\"/certifications\");\r\n        setCertList(res.data);\r\n      } catch {\r\n        window.alert(\"Falha ao carregar lista de certificados\");\r\n      } finally {\r\n        setLoadingList(false);\r\n      }\r\n    }\r\n    setShowAll((v) => !v);\r\n    setCertDetail(null);\r\n  };\r\n\r\n  const handleClickCert = async (id) => {\r\n    try {\r\n      const res = await API.get(`/search/certification/${id}`);\r\n      setCertDetail(res.data);\r\n      // dispara também callback, se quiser manter App sincronizado\r\n      onCertification(res.data);\r\n    } catch {\r\n      window.alert(\"Erro ao buscar certificação\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"card\" style={{ marginTop: \"2rem\", padding: \"1rem\" }}>\r\n      <h2>Pesquisar</h2>\r\n      <div style={{ display: \"flex\", gap: \"0.5rem\", marginBottom: \"1rem\", flexWrap: \"wrap\" }}>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Buscar ponto (ex: D5Y-M-0001)\"\r\n          value={pointCode}\r\n          onChange={(e) => setPointCode(e.target.value)}\r\n        />\r\n        <button onClick={handleSearchPoint}>Buscar ponto</button>\r\n      </div>\r\n      <div style={{ display: \"flex\", gap: \"0.5rem\", marginBottom: \"1rem\", flexWrap: \"wrap\" }}>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Buscar certificação (ID)\"\r\n          value={certId}\r\n          onChange={(e) => setCertId(e.target.value)}\r\n        />\r\n        <button onClick={handleSearchCert}>Buscar certificação</button>\r\n        <button onClick={handleToggleList}>\r\n          {showAll ? \"Ocultar todas\" : \"Ver todas\"}\r\n        </button>\r\n      </div>\r\n\r\n      {/* Lista de todos os certificados */}\r\n      {showAll && (\r\n        <div\r\n          style={{\r\n            maxHeight: 200,\r\n            overflowY: \"auto\",\r\n            border: \"1px solid var(--color-border)\",\r\n            borderRadius: \"4px\",\r\n            marginBottom: \"1rem\",\r\n          }}\r\n        >\r\n          {loadingList\r\n            ? <div style={{ padding: \"0.5rem\" }}>Carregando...</div>\r\n            : certList.map((c) => (\r\n                <div\r\n                  key={c.id}\r\n                  style={{\r\n                    padding: \"0.5rem\",\r\n                    borderBottom: \"1px solid var(--color-border)\",\r\n                    cursor: \"pointer\",\r\n                  }}\r\n                  onClick={() => handleClickCert(c.certification_id)}\r\n                >\r\n                  {c.certification_id} — {c.denominacao}\r\n                </div>\r\n              ))\r\n          }\r\n          {!loadingList && certList.length === 0 && (\r\n            <div style={{ padding: \"0.5rem\", color: \"#6b7280\" }}>\r\n              Nenhum certificado cadastrado.\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Detalhe da certificação selecionada */}\r\n      {certDetail && (\r\n        <div style={{ marginTop: \"1rem\" }}>\r\n          <CertificateInfo data={certDetail} />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}