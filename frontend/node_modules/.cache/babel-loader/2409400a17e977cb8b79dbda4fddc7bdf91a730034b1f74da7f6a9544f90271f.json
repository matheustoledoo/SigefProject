{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import Upload from\"./components/Upload\";import IntervalRow from\"./components/IntervalRow\";import Search from\"./components/Search\";import API from\"./api\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function App(){const[stats,setStats]=useState(null);const[intervals,setIntervals]=useState({});const prefixes=[\"D5Y-M\",\"D5Y-P\",\"D5Y-V\"];const fetchIntervals=async()=>{const res={};for(const p of prefixes){try{const r=await API.get(`/intervals/${p}`);res[p]=r.data;}catch(e){res[p]=null;}}setIntervals(res);};useEffect(()=>{const loadStats=async()=>{try{const r=await API.get(\"/stats\");setStats(r.data);}catch{}};loadStats();fetchIntervals();},[]);return/*#__PURE__*/_jsxs(\"div\",{style:{padding:20,fontFamily:\"Arial, sans-serif\"},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"SIGEF Manager\"}),/*#__PURE__*/_jsx(Upload,{onUploaded:data=>setStats(data)}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"N\\xFAmero de certificados: \"}),stats?stats.total_certificados:\"—\"]}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:20},children:prefixes.map(p=>/*#__PURE__*/_jsx(\"div\",{children:intervals[p]?/*#__PURE__*/_jsx(IntervalRow,{prefix:p,interval:intervals[p].current_interval,nextInterval:intervals[p].next_interval}):/*#__PURE__*/_jsxs(\"div\",{children:[p,\": carregando...\"]})},p))}),/*#__PURE__*/_jsx(Search,{})]});}","map":{"version":3,"names":["React","useState","useEffect","Upload","IntervalRow","Search","API","jsx","_jsx","jsxs","_jsxs","App","stats","setStats","intervals","setIntervals","prefixes","fetchIntervals","res","p","r","get","data","e","loadStats","style","padding","fontFamily","children","onUploaded","total_certificados","marginTop","map","prefix","interval","current_interval","nextInterval","next_interval"],"sources":["C:/Users/mathe/Desktop/Projeto_Sigef/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport Upload from \"./components/Upload\";\r\nimport IntervalRow from \"./components/IntervalRow\";\r\nimport Search from \"./components/Search\";\r\nimport API from \"./api\";\r\n\r\nexport default function App() {\r\n  const [stats, setStats] = useState(null);\r\n  const [intervals, setIntervals] = useState({});\r\n  const prefixes = [\"D5Y-M\", \"D5Y-P\", \"D5Y-V\"];\r\n\r\n  const fetchIntervals = async () => {\r\n    const res = {};\r\n    for (const p of prefixes) {\r\n      try {\r\n        const r = await API.get(`/intervals/${p}`);\r\n        res[p] = r.data;\r\n      } catch (e) {\r\n        res[p] = null;\r\n      }\r\n    }\r\n    setIntervals(res);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const loadStats = async () => {\r\n      try {\r\n        const r = await API.get(\"/stats\");\r\n        setStats(r.data);\r\n      } catch {}\r\n    };\r\n    loadStats();\r\n    fetchIntervals();\r\n  }, []);\r\n\r\n  return (\r\n    <div style={{ padding: 20, fontFamily: \"Arial, sans-serif\" }}>\r\n      <h1>SIGEF Manager</h1>\r\n      <Upload onUploaded={(data) => setStats(data)} />\r\n      <div>\r\n        <strong>Número de certificados: </strong>\r\n        {stats ? stats.total_certificados : \"—\"}\r\n      </div>\r\n      <div style={{ marginTop: 20 }}>\r\n        {prefixes.map((p) => (\r\n          <div key={p}>\r\n            {intervals[p] ? (\r\n              <IntervalRow\r\n                prefix={p}\r\n                interval={intervals[p].current_interval}\r\n                nextInterval={intervals[p].next_interval}\r\n              />\r\n            ) : (\r\n              <div>{p}: carregando...</div>\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n      <Search />\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,MAAM,KAAM,qBAAqB,CACxC,MAAO,CAAAC,WAAW,KAAM,0BAA0B,CAClD,MAAO,CAAAC,MAAM,KAAM,qBAAqB,CACxC,MAAO,CAAAC,GAAG,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAExB,cAAe,SAAS,CAAAC,GAAGA,CAAA,CAAG,CAC5B,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGZ,QAAQ,CAAC,IAAI,CAAC,CACxC,KAAM,CAACa,SAAS,CAAEC,YAAY,CAAC,CAAGd,QAAQ,CAAC,CAAC,CAAC,CAAC,CAC9C,KAAM,CAAAe,QAAQ,CAAG,CAAC,OAAO,CAAE,OAAO,CAAE,OAAO,CAAC,CAE5C,KAAM,CAAAC,cAAc,CAAG,KAAAA,CAAA,GAAY,CACjC,KAAM,CAAAC,GAAG,CAAG,CAAC,CAAC,CACd,IAAK,KAAM,CAAAC,CAAC,GAAI,CAAAH,QAAQ,CAAE,CACxB,GAAI,CACF,KAAM,CAAAI,CAAC,CAAG,KAAM,CAAAd,GAAG,CAACe,GAAG,CAAC,cAAcF,CAAC,EAAE,CAAC,CAC1CD,GAAG,CAACC,CAAC,CAAC,CAAGC,CAAC,CAACE,IAAI,CACjB,CAAE,MAAOC,CAAC,CAAE,CACVL,GAAG,CAACC,CAAC,CAAC,CAAG,IAAI,CACf,CACF,CACAJ,YAAY,CAACG,GAAG,CAAC,CACnB,CAAC,CAEDhB,SAAS,CAAC,IAAM,CACd,KAAM,CAAAsB,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC5B,GAAI,CACF,KAAM,CAAAJ,CAAC,CAAG,KAAM,CAAAd,GAAG,CAACe,GAAG,CAAC,QAAQ,CAAC,CACjCR,QAAQ,CAACO,CAAC,CAACE,IAAI,CAAC,CAClB,CAAE,KAAM,CAAC,CACX,CAAC,CACDE,SAAS,CAAC,CAAC,CACXP,cAAc,CAAC,CAAC,CAClB,CAAC,CAAE,EAAE,CAAC,CAEN,mBACEP,KAAA,QAAKe,KAAK,CAAE,CAAEC,OAAO,CAAE,EAAE,CAAEC,UAAU,CAAE,mBAAoB,CAAE,CAAAC,QAAA,eAC3DpB,IAAA,OAAAoB,QAAA,CAAI,eAAa,CAAI,CAAC,cACtBpB,IAAA,CAACL,MAAM,EAAC0B,UAAU,CAAGP,IAAI,EAAKT,QAAQ,CAACS,IAAI,CAAE,CAAE,CAAC,cAChDZ,KAAA,QAAAkB,QAAA,eACEpB,IAAA,WAAAoB,QAAA,CAAQ,6BAAwB,CAAQ,CAAC,CACxChB,KAAK,CAAGA,KAAK,CAACkB,kBAAkB,CAAG,GAAG,EACpC,CAAC,cACNtB,IAAA,QAAKiB,KAAK,CAAE,CAAEM,SAAS,CAAE,EAAG,CAAE,CAAAH,QAAA,CAC3BZ,QAAQ,CAACgB,GAAG,CAAEb,CAAC,eACdX,IAAA,QAAAoB,QAAA,CACGd,SAAS,CAACK,CAAC,CAAC,cACXX,IAAA,CAACJ,WAAW,EACV6B,MAAM,CAAEd,CAAE,CACVe,QAAQ,CAAEpB,SAAS,CAACK,CAAC,CAAC,CAACgB,gBAAiB,CACxCC,YAAY,CAAEtB,SAAS,CAACK,CAAC,CAAC,CAACkB,aAAc,CAC1C,CAAC,cAEF3B,KAAA,QAAAkB,QAAA,EAAMT,CAAC,CAAC,iBAAe,EAAK,CAC7B,EATOA,CAUL,CACN,CAAC,CACC,CAAC,cACNX,IAAA,CAACH,MAAM,GAAE,CAAC,EACP,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}